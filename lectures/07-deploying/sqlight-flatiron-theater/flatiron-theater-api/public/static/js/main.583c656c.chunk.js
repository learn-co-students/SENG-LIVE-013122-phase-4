(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(16),s=n.n(r),a=(n(24),n(19)),j=n(3),i=n(2),o=n(7),b=n(0);var u=function(e){var t=e.production,n=t.title,c=t.budget,r=t.genre,s=t.image,a=t.id;return console.log(t),Object(b.jsx)(o.b,{to:"/productions/".concat(a),children:Object(b.jsxs)("tr",{className:"table-row",children:[Object(b.jsx)("td",{children:n}),Object(b.jsx)("td",{children:r}),Object(b.jsxs)("td",{children:["$ ",c]}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{style:{width:"100px"},src:s})})]})})};var l=function(e){var t=e.productions;return Object(b.jsx)("div",{children:Object(b.jsx)("table",{children:t.map((function(e){return Object(b.jsx)(u,{production:e},e.id)}))})})},O=n(8),d=n(6);var h=function(e){var t=e.handlePost,n=e.errors,r=Object(c.useState)({title:"",genre:"",budget:"",image:"",director:"",description:""}),s=Object(j.a)(r,2),a=s[0],i=s[1];return Object(b.jsxs)("div",{className:"App",children:[n?n.map((function(e){return Object(b.jsx)("div",{children:e})})):null,Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={title:a.title,genre:a.genre,budget:a.budget,image:a.image,director:a.director,description:a.description,ongoing:!0};console.log(n),t(n)},children:[Object(b.jsxs)("label",{children:["Title",Object(b.jsx)("input",{type:"text",name:"title",value:a.title,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Genre",Object(b.jsx)("input",{type:"text",name:"genre",value:a.genre,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Budget",Object(b.jsx)("input",{type:"number",name:"budget",value:a.budget,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Image",Object(b.jsx)("input",{type:"text",name:"image",value:a.image,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Director",Object(b.jsx)("input",{type:"text",name:"director",value:a.director,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Description",Object(b.jsx)("textarea",{type:"text",name:"description",rows:"4",cols:"50",value:a.description,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))}})]}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"submit",value:"Submit Production"})]})]})};var x=function(e){e.cart;var t=e.setIsAuthenticated,n=e.setUser,c=e.user;return console.log(c),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Flatiron Theater Company"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(){t(!1),n(null)}))},children:"Logout"}),Object(b.jsx)("h1",{children:Object(b.jsx)(o.b,{to:"/",children:" Home"})}),c&&c.admin?Object(b.jsx)("h1",{children:Object(b.jsx)(o.b,{to:"/productions/new",children:"New Production"})}):null]})]})};var p=function(e){e.cart,e.setCart;var t=Object(c.useState)({crew_members:[],performers_and_roles:[]}),n=Object(j.a)(t,2),r=n[0],s=n[1],a=Object(i.g)();Object(c.useEffect)((function(){fetch("/productions/".concat(a.id)).then((function(e){return e.json()})).then((function(e){console.log(e),s(e)}))}),[]);var o=r.title,u=r.budget,l=r.genre,O=r.image,d=r.description;return r.crew_members,r.performers_and_roles,Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("h1",{children:o}),Object(b.jsx)("h3",{children:l}),Object(b.jsx)("h3",{children:u}),Object(b.jsx)("img",{style:{width:"100px"},src:O}),Object(b.jsx)("p",{children:d}),Object(b.jsx)("button",{children:"Buy Ticket"})]})};var g=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),a=Object(j.a)(s,2),i=a[0],o=a[1],u=Object(c.useState)(""),l=Object(j.a)(u,2),O=l[0],d=l[1],h=Object(c.useState)([]),x=Object(j.a)(h,2),p=x[0],g=x[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Sign UP"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:n,email:i,password:O};fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.errors&&g(Object.entries(e.errors))}))},children:[Object(b.jsxs)("label",{children:["Username",Object(b.jsx)("input",{type:"text",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(b.jsxs)("label",{children:["email",Object(b.jsx)("input",{type:"text",value:i,onChange:function(e){return o(e.target.value)}})]}),Object(b.jsxs)("label",{children:["Password",Object(b.jsx)("input",{type:"password",value:O,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsx)("input",{type:"submit",value:"Sign up!"})]}),p?p.map((function(e){return Object(b.jsx)("div",{children:e[0]+": "+e[1]})})):null]})};var f=function(e){var t=e.setUser,n=e.setIsAuthenticated,r=Object(c.useState)(""),s=Object(j.a)(r,2),a=s[0],o=s[1],u=Object(c.useState)(""),l=Object(j.a)(u,2),O=l[0],d=l[1],h=Object(c.useState)([]),x=Object(j.a)(h,2),p=x[0],f=x[1];return Object(i.f)(),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Flatiron Theater Company"}),Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={username:a,password:O};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){t(e),n(!0)})):e.json().then((function(e){return f(e.error)}))}))},children:[Object(b.jsxs)("label",{children:["Username",Object(b.jsx)("input",{type:"text",value:a,onChange:function(e){return o(e.target.value)}})]}),Object(b.jsxs)("label",{children:["Password",Object(b.jsx)("input",{type:"password",value:O,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsx)("input",{type:"submit",value:"Login!"})]}),p?Object(b.jsx)("div",{children:p}):null,Object(b.jsx)(g,{})]})};var m=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(j.a)(s,2),u=o[0],O=o[1],d=Object(c.useState)([]),m=Object(j.a)(d,2),v=m[0],y=m[1],S=Object(c.useState)(!1),C=Object(j.a)(S,2),w=C[0],T=C[1],P=Object(c.useState)(null),_=Object(j.a)(P,2),k=_[0],N=_[1];return Object(c.useEffect)((function(){fetch("/authorized_user").then((function(e){e.ok&&e.json().then((function(e){T(!0),N(e)}))})),fetch("/productions").then((function(e){return e.json()})).then(r)}),[]),w?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{cart:v,setIsAuthenticated:T,setUser:N,user:k}),Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",children:Object(b.jsx)(l,{productions:n})}),Object(b.jsx)(i.a,{exact:!0,path:"/productions/new",children:Object(b.jsx)(h,{handlePost:function(e){fetch("/productions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?e.json().then((function(e){return r([].concat(Object(a.a)(n),[e]))})):e.json().then((function(e){O(Object.entries(e.errors))}))}))},errors:u})}),Object(b.jsx)(i.a,{exact:!0,path:"/productions/:id",children:Object(b.jsx)(p,{cart:v,setCart:y})}),Object(b.jsx)(i.a,{path:"/sign_up",children:Object(b.jsx)(g,{})}),Object(b.jsx)(i.a,{path:"/login",children:Object(b.jsx)(f,{})})]})]}):Object(b.jsx)(f,{error:"please login",setIsAuthenticated:T,setUser:N})};s.a.render(Object(b.jsx)(o.a,{children:Object(b.jsx)(m,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.583c656c.chunk.js.map